<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>

<script src="service.js"></script>
<script>
    /*
        Check if the user is logged in.
        If the user is logged in, redirect the user to welcome page.
    */
    skapi.getProfile().then(user => {
        if (user) {
            location.href = 'welcome.html';
        }
    });
</script>

<main>
    <a href="index.html">Back</a>

    <h1>Sign Up</h1>
    <!--
        When signup_confirmation option is set to true,
        User will be required to confirm their email address before they can login.
    -->
    <form action='signup-success.html' onsubmit="
        skapi.signup(event).catch(err => alert(err.message) );
    ">
        <table>
            <tr>
                <td>Login Email</td>
                <td>
                    <input name="email" placeholder='your@email.com' required>
                </td>
            </tr>
            <tr>
                <td>Set Password</td>
                <td>
                    <input type="password" name="password" minlength="6" placeholder='At least 6 characters' required>
                </td>
            </tr>
            <tr>
                <td>Your Name</td>
                <td>
                    <input name="name" placeholder='Your name (required)' required>
                </td>
            </tr>
            <tr>
                <td></td>
                <td style="text-align:right">
                    <small><a href="login.html">Already have an account?</a></small>
                    <br>
                    <br>
                    <input type="submit" value="Sign Up">
                </td>
            </tr>
        </table>
    </form>
</main>